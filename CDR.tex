% !TeX program = lualatex

\documentclass[12pt]{article}
\usepackage{geometry}
\geometry{
	paper=a4paper, % Paper size
	top=2.5cm, % Top margin
	bottom=2.5cm, % Bottom margin
	left=2.5cm, % Left margin
	right=2.5cm, % Right margin
	headheight=0.75cm, % Header height
	footskip=1.5cm, % Space from the bottom margin to the baseline of the footer
	headsep=0.75cm, % Space from the top margin to the baseline of the header
	%showframe, % Uncomment to show how the type block is set on the page
}
\usepackage[english]{babel}
\usepackage[]{ragged2e}

\addto\captionsenglish{% Replace "english" with the language you use
  \renewcommand{\contentsname}%
    {Table of Contents}}

\usepackage{blindtext}
% \usepackage{background}
%-------------------------------- Character encoding ----------------------------
\usepackage[]{fontspec}
\usepackage[T1]{fontenc}
\setmainfont{Times New Roman}
%----------------------------- Mathematics packages from AMS ---------------

\usepackage{amsmath, amsfonts, amsthm, amssymb}
\usepackage{braket, nicefrac}

% ----------- International System of Units
\usepackage{siunitx}
\usepackage{tikz}

%------------------------------ Lists / numbers -------------------------
\usepackage{enumitem, multicol}

%------------------------------- Figure insertions --------------
\usepackage{graphicx, float}  % Use option [H] to force the placement of a figure
\usepackage{keystroke}
\usepackage{pgfplots}\usepgfplotslibrary{units}\pgfplotsset{compat=1.16}
\usepackage{fancyhdr}
\usepackage{eso-pic}
%------------------------------- Line Spacing --------------
\usepackage{setspace}

%------------------------------- Depth of the ToC --------------
\setcounter{tocdepth}{2}

%%%%%%%%%%%%%%%%%%%%%%%%%% Hyperlink References %%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[hidelinks]{hyperref}

%--------------------% Storage Path for images %-----------------%
\graphicspath{{graphics/}{Graphics/}{./}}

\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

% \backgroundsetup{
% 	scale = 1.0,
% 	opacity = 0.5,
% 	angle = 0,
% 	contents = {\includegraphics[width=\paperwidth]{teknofest_logo.png}}
% }
\pagestyle{fancy}
\fancyhf{}
\chead{FIGHTER UAV COMPETITION 2022}
\cfoot{ASTROTECH}
\rfoot{\thepage}

\pagenumbering{gobble} % Title page
\begin{document}
\setstretch{1.15}


\begin{titlepage}
    \centering
    \AddToShipoutPictureBG{
        \begin{tikzpicture}[opacity=0.3]\node at
        (0,0){\includegraphics[width = \paperwidth ]{teknofest_logo.png}};
        \end{tikzpicture}
        }

	\title{ %TODO texts can be made bigger
		TEKNOFEST \\
		AVIATION, SPACE AND TECHNOLOGY FESTIVAL \\
		FIGTHER UAV COMPETITION \\
		CRITICAL DESIGN REPORT \\}
	\author{
		TEAM NAME: ASTROTECH \\
		AUTHORS : xxxxx,\\} %TODO Authors to be added
	\date{}
	\maketitle
\end{titlepage}	


% \noBgThispage
\pagenumbering{arabic}
\stepcounter{page}
\tableofcontents % Table of contents
\clearpage


\section{BASE SYSTEM SUMMARY}
\subsection{System Description}
\justify 

The basic mission description of Astrotech UAV system is selecting a target by analyzing data from rival UAVs moving in the air, performing an appropriate approach to the target UAV to obtain a visual contact and pursuing the rival UAV with the help of the guidance algorithm. The Astrotech UAV is also capable of diving onto ground targets whose coordinates are given and collecting data on these targets.

\justify
The UAV system, the combination of the Astrotech UAV and the ground station, consists of components under two headings, those onboard and those in the ground station. The onboard components are located inside the fuselage and enable high maneuverability and robustness for fully autonomous flight, which are key properties to fulfill the mission requirements. Among these onboard components, the flight controller is responsible for the stable flight of the UAV using data obtained from its sensors, such as IMU and magnetometer. It also sets the standard for interconnection between the controlled elements and the mission software. In addition to sensors in the flight controller, extra external sensors, such as GPS, airspeed sensor and LIDAR are also connected to it. Another onboard component is the companion computer on which mission software runs. It directly or indirectly uses data from all other sensors, including the camera, and processing this data, it transmits the commands-control outputs to the flight controller. For communication of the Astrotech UAV with the ground station, in addition to the use of RFD868 telemetry set for mutual telemetry communication, R12DS receiver for receiving the inputs from the RF controller, Ubiquiti Bullet M5-HP for displaying the view of UAV are used.

\justify
The ground station in the UAV system also consists of numerous electronic components, one of which is the ground station computer. It is responsible for the communication with the main server, analysis of data obtained from the server and transmitting it to the Astrotech UAV. It further allows the data of the Astrotech UAV to be displayed in a visual format with a GUI. In addition, one of the telemetry transceivers, the RF controller required to manually control the UAV when necessary, and a Wi-Fi receiver, that is required to monitor the image from the ground station, are also located in the ground station. Finally, the RTK module, which is used to increase the sensitivity of the GPS data, is also located in the ground station.

\subsection{System Final Performance Specifications}
In this part, the final performance specifications of the system that are found from the analysis and simulation programs are given.

% \begin{table}
% 	\centering
% 	%TODO Table here
% \end{table}

\justify
As a result of our calculations, Astrotech UAV’s takeoff weight is found 3100 grams, and the useful load is found 1500 grams, so we need 3100 grams of lift force to maintain a steady level flight. As a result, we find the cruise speed as 17 meters per second to provide this much lift force at low angle of attack values (0-2), in other words, to fly at a steady level. Moreover, the speed on the stall position, where the angle of attack rises beyond a specific point, then lift begins to decrease, is found at 9.5 meters per second by the formula:

\begin{align}
	V_{stall} = \sqrt{ \frac{2W}{\rho \cdot S C_{L max}}} 
\end{align}

% TODO Figure here
\justify
The flight time has been calculated as 24.7 minutes, and CL/CD ratio has been calculated as 20 for cruise speed. For detailed information, see 3.3 from the report.
\justify
The average rate of climb value of Astrotech UAV has been evaluated as 8.8 m/s by the formula:

\begin{align}
	R_{OC} = \frac{T \cdot V_\infty - D \cdot V_\infty}{W}
\end{align}

The weight of the aircraft is 30.411 Newton, thrust (T) equals 18.3 Newton, drag (D) equals 2.5 Newton, and the aircraft's speed is equal to 17 meters per second, that is, cruise speed. If the values are put in the equation, the rate of climb can be found as 8.8 meters per second.
\justify
Camera resolution is an important specification which affects the image quality and therefore influences our ability to detect or characterize objects of interest during tacking and detecting competitor UAVs. The decided camera module supports up to 120 fps for full HD resolution which is critical in any application involving fast motion.
\justify
It is expected that the companion computer can work at 30 FPS when selected image processing methods are used. NVIDIA Xavier NX Developer Kit has NVIDIA Volta architecture with 384 NVIDIA CUDA® cores, and 48 Tensor cores and these features are enough to satisfy our expectations. 
\justify
The minimum turn radius is found as 9.2 meters. While finding the minimum turn radius, the banking angle plays a vital role in finding the load factor (n) because the load factor is equal to $\frac{1}{\cos(\Phi)}$ where \Phi is the banking angle. Moreover, if \Phi  approaches 2, the load factor value goes to infinity and, therefore, 1n becomes closer to 0. As a result, if we look at the minimum turn radius equation, which is $R_{min}=\frac{V^2_{stall}}{g \cdot \sqrt{1-\frac{1}{n^2}}}$ . Stall speed is 9.5 meters per second, g is the gravitational acceleration, which is equal to 9.81 meters per second square, and, if $\frac{1}{n}$ is equal to 0, the value inside the square root is the 1. As a result, the minimum radius turn value becomes 9.22 meters.


\section{ORGANIZATION SUMMARY}
\subsection{Team Organization}
%TODO Team Organization figure here
\justify As can be seen from the organization chart, the METU Comet Astrotech Team consists of the team captain, three  sub-teams and finance and logistics member.

\subsection{Timeline and Budget}
\paragraph*{Timeline} The lines shown in blue show the content of the planned timeline announced in March. The works performed and the period in which they were carried out are shown in green. Worked parts of unfinished jobs are marked in yellow and the rest in red. The parts marked in red thus show the current plan as well.

\paragraph*{Budget} Bütçe ile ilgili tabloda tedarik edilen ürünler işaretlenmiştir. Bu ürünler için ödenen tutar ve tahmini tutar birlikte verilmiştir. Tedarik edilemeyen ürünler için güncel fiyatlar tabloya eklenmiştir. 
should be turned to english.

\section{DETAILED DESING SUMMARY}
\subsection{Final System Architecture}
\justify
In this section, the final version of the system architecture, the brand / model information of the hardware to be used should be included. If there is a difference with the conceptual architecture, it should be stated and the reason should be explained.
%TODO System Architecture figure here
\justify

\subsection{Subsystems Summary}
In this chapter; compliance of selected subsystems with vehicle requirements and selection criteria specified in the preliminary design report will be explained. If there is more than one option researched for the same duty, it should also be explained why the final product was chosen. 

\paragraph*{Flight Controller and GPS Sensor} PX4 autopilot software is preferred to ensure the stability of the UAV during flight and to prepare the appropriate background for the autonomous mission software to be developed. Flight controllers compatible with this software were examined. Pixhawk Cube Orange is preferred because it has a lower error rate in IMU data than its competitors, is easily accessible, has detailed documentation and many sample projects. On the other hand, the reasons behind the selection of GPS sensor were RTK module compatibility, update rate, and low error rates. In this regard, it was decided that the Here+3 met our requirements, with 2.5 meters accuracy without using the RTK module. Also, when RTK module is used, the error value can be minimized up to 0.25 meters. 

\paragraph*{Companion Computer} To obtain real-time performance, an onboard computing unit responsible for object detection and tracking as well as the guidance and target selection steps will be utilized. These computations would require relatively high computing power, thus; we preferred Nvidia Jetson Xavier NX, whose performance fulfills the requirements for relatively low cost. 

\paragraph*{Battery} The electronics and the propulsion system of our aircraft will be powered by a Li-Po battery that has enough capacity for a flight time of 25 minutes. According to our calculations, a 4 cell Li-Po battery with a nominal voltage of 14.8V and a capacity of 10000mAh is enough for our aircraft when we also consider the safety margins. As we can see from the power consumption table below in part 3.3, which includes components with major power use, our battery with a capacity of approximately 150W/h is adequate to power our aircraft for more than enough time.

\paragraph*{Propulsion System and Servos} For our UAV, we choose a motor-propeller pair that gives us the needed thrust to weight ratio of 1.1 as efficiently as possible.
% TODO FIGURE HERE 
\justify 
On the table above, we can see the thrust values and efficiency of different motors. We choose the T-Motor AT3520 850KV Motor because of it sufficient thrust value and high efficiency. This motor is powerful enough to supply our aircraft with enough thrust for the entirety of the competition. For the manipulation of the control surfaces, we will use servo motors with enough torque to guide our aircraft. ES09MD Servo Motors are selected to be used. They are small, lightweight and have enough torque. They were also preferred because they have metal gears and can be driven digitally. To drive our motors, we will use an ESC with a maximum current of 80A with a built-in BEC. Hobbywing Skywalker 80A ESC is selected to be used as it can provide the necessary power to our system.

\paragraph*{Camera} The features of the camera and its suitability for UAV  are mentioned. The selected camera is e-CAM24-CUNX, which is a Full HD MIPI CSI-2 global shutter camera. This camera is based on a 1/ 2.6” AR0234CS global shutter CMOS image sensor with a well-tuned ISP. Its global shutter capability along with 120fps frame rate helps to minimize frame to frame distortion and reduce the motion artifacts while capturing. Therefore, the UAV can obtain clear images of competitor UAVs while detecting and tracking. eCAM24-CUNX can be directly connected to the MIPI CSI-2 connector of the Nvidia Jetson platforms which are Jetson XavierTM NX/TX2 NX/Nano via Flex cable. Another advantage of the camera is that MISI CSI-2 is faster and has a reliable protocol to handle video from 1080p to 8k and has a higher net image bandwidth than USB. In addition, its DOFV is 133.9 and it meets the desired view for image processing algorithms.

\paragraph*{Pitot Tube} To calculate the airspeed of our aircraft, we will use a pitot tube that is compatible with the flight controller. Ready To Sky Jmt PT60 Pitot Tube is found to be adequate for our system.

\paragraph*{RC Controller} Radiolink AT10II and its transceiver RD12S have 12 channels for communication, 4km actual air range with 3ms transmission latency, which makes it suitable to use in Astrotech UAV. Also, another reason behind this selection is that it is more accessible to buy for the Metu Comet Astrotech team. 

\paragraph*{Telemetry Bundle} To transmit telemetry data between UAV and ground station with high speeds and low loss rates, a telemetry bundle with such specifications is needed. With a 40 km air transmission range, RFD868x Telemetry Bundle is suitable for the needs of Astrotech UAV. 

\subsection{Aircraft Performance Summary}
This section will demonstrate that the aircraft has propulsion that can remain in the air for the whole of a competition round.

Aerodynamic analysis of the Astrotech’s tail, wing, and body has been done using XFLR5, an aerodynamic analysis program (figure X.). As a result of the analysis, Lift coefficient vs. Drag Coefficient (CL/CD) vs. Alpha (α) is plotted, as shown in figure X1. %TODO Figure X1 here

The CL/CD vs. Alpha graph represents the efficiency of the aircraft, and the more CL/CD means, the more efficient the aircraft is. Therefore, we want High CL/CD for less fuel consumption and, as a result, more time in flight. Moreover, in steady level flight which is the condition thrust (T) is equal to drag force (D) and Lift Force (L) is equal to the weight of the aircraft(W), we want higher CL/CD values. In the graph, the CL/CD ratio between the 0-2 angle of attack (desired steady level flight angle of attacks) is between 19-21.  Thus, CL/CD ratio is around 20 when the condition is steady. However, Raymer (2018) stated that CL/CD ratio can decrease after the external components takes its place on the aircraft. Thus, after the external components such as servos are placed at the outer skeleton of the frame, we premeditate that this ratio can decrease up to 12. 


\subsection{3D Design of Aircraft}
\subsection{Aircraft Weight Distrubution}



\section{AUTONOMOUS MISSIONS}
\subsection{Autonomous Lockdown}
\subsection{Kamikaze Mission}

\section{GROUND STATION AND COMMUNICATION}

\section{USER INTERFACE DESIGN}

\section{AIRCRAFT INTEGRATION}
\subsection{Stuctural Integration}
\subsection{Mechanical Integration}
\subsection{Electronic Integration}

\section{TEST AND SIMULATION}
\subsection{Sub-System Tests}
\subsection{Flight Test and Flight Checklist}

\section{SAFETY}

\section{REFERENCES}

\singlespacing
\bibliographystyle{IEEEtran} 
\bibliography{CDR}
\end{document}